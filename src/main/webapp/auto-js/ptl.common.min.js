var _ptlCommon={msg:{headline:"자동로그아웃까지 {0} 초 남았습니다.",title:"자동로그아웃 안내",body:"고객님의 안전한 서비스 이용을 위해  약 {0} 동안<br/>서비스 이용이 없어 자동 로그아웃 됩니다.<br/>계속 이용하시려면 <strong style='color:#ff6666;'>[계속사용하기]</strong> 버튼을 클릭하세요.",btnActivityLogin:"계속사용하기",},getMsg:function(key,value){if(value){return this.msg[key].replace(/\{0\}/,value);}else{return this.msg[key];}},event:function(elem,type,eventHandle){if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}else if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else{elem[type]=eventHandle;}},UserActivity:function(){var lastEventTime="";var ptlUrl="";var ptlSrc="";var cntsSsoInterval=1200;var timeOutTime="60";var openWinObject=[];var sessionTimeOutFn;var bodyElement;var timer1;var timer2;var timer3;function isSubmit(){if(_ptlCommon.isNull(lastEventTime)){_ptlCommon.setText("activityTime",_ptlCommon.getDisplayTime(cntsSsoInterval));var scrollLeft=document.body.scrollLeft||document.documentElement.scrollLeft;var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;var left=(scrollLeft+(document.documentElement.clientWidth)/2);var top=(scrollTop+(document.documentElement.clientHeight-260)/2);clearInterval(timer1);clearInterval(timer3);if(document.body.scrollHeight<document.documentElement.clientHeight){document.getElementById("ptlCommon_mask").style.height=document.documentElement.clientHeight+"px";}else{document.getElementById("ptlCommon_mask").style.height=document.body.scrollHeight+"px";}
document.getElementById("ptlCommon_mask").style.width=document.body.clientWidth+"px";document.getElementById("ptlCommon_mask").style.display="block";document.getElementById("ptlCommon_mask_content").style.display="block";document.getElementById("ptlCommon_mask_content").style.top=top+"px";document.getElementById("ptlCommon_mask_content").style.left=left+"px";timer2=setInterval(function(){var ptlCommon_logoutTime=Number(_ptlCommon.getText("ptlCommon_logoutTime"));ptlCommon_logoutTime--;if(ptlCommon_logoutTime==0){clearInterval(timer2);if(typeof sessionTimeOutFn=="function"){sessionTimeOutFn();}
if(openWinObject.length>0){for(var i=0;openWinObject.length>i;i++){try{openWinObject[i].close();}catch(e){}}}
document.getElementById("ptlCommon_APP").value=document.bizEl_frmStnd.CNTS_NM.value;document.getElementById("ptlCommon_ICON").value=document.bizEl_frmStnd.CNTS_PATH.value;document.getElementById("ptlCommon_cntsSsoInterval").value=cntsSsoInterval;document.getElementById("ptlCommon_docActivityCheckFrm").action=ptlSrc+"/logout_info2.act";document.getElementById("ptlCommon_docActivityCheckFrm").submit();}else{_ptlCommon.setText("ptlCommon_logoutTime",ptlCommon_logoutTime+"");}},1000);}else{lastEventTime="";}}
function docEventBind(){bodyElement=document.getElementsByTagName("body")[0];_ptlCommon.event(bodyElement,"click",function(){lastEventTime=_ptlCommon.getCurrentTime();});_ptlCommon.event(bodyElement,"keydown",function(){lastEventTime=_ptlCommon.getCurrentTime();});_ptlCommon.event(window,"scroll",function(){if(document.getElementById("ptlCommon_mask_content").style.display=="block"){var scrollLeft=document.body.scrollLeft||document.documentElement.scrollLeft;var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;var left=(scrollLeft+(document.documentElement.clientWidth)/2);var top=(scrollTop+(document.documentElement.clientHeight-260)/2);document.getElementById("ptlCommon_mask_content").style.top=top+"px";document.getElementById("ptlCommon_mask_content").style.left=left+"px";}});}
function openWinEventBind(winObject,cnt){setTimeout(function(){if(winObject.document.readyState=="loaded"||winObject.document.readyState=="complete"){if("MSIE"!=_ptlCommon.getBrowserType()){winObject.document.onreadystatechange=null;}
var popBody=winObject.document.getElementsByTagName("body")[0];_ptlCommon.event(popBody,"click",function(){lastEventTime=_ptlCommon.getCurrentTime();});_ptlCommon.event(popBody,"keydown",function(){lastEventTime=_ptlCommon.getCurrentTime();});}else{if(cnt<5){openWinEventBind(winObject,(cnt+1));}}},2000);}
function setDocInterval(){if(!_ptlCommon.isNull(timer1)){clearInterval(timer1);}
if(!_ptlCommon.isNull(timer3)){clearInterval(timer3);}
timer1=setInterval(isSubmit,(Number(cntsSsoInterval)<300?cntsSsoInterval:(Number(cntsSsoInterval)-300))*1000);timer3=setInterval(function(){try{var iframeElement=document.getElementsByTagName("iframe");for(var i=0;i<iframeElement.length;i++){if(iframeElement[i].contentWindow.document.body){if(_ptlCommon.isNull(iframeElement[i].contentWindow.document.body.getAttribute("iframe_click"))){_ptlCommon.event(iframeElement[i].contentWindow.document.body,"click",function(){lastEventTime=_ptlCommon.getCurrentTime();});_ptlCommon.event(iframeElement[i].contentWindow.document.body,"keydown",function(){lastEventTime=_ptlCommon.getCurrentTime();});iframeElement[i].contentWindow.document.body.setAttribute("iframe_click","true");}else{}
var chldIframeElement=iframeElement[i].contentWindow.document.getElementsByTagName("iframe");for(var c=0;c<chldIframeElement.length;c++){if(chldIframeElement[c].contentWindow.document.body){if(_ptlCommon.isNull(chldIframeElement[c].contentWindow.document.body.getAttribute("iframe_click"))){_ptlCommon.event(chldIframeElement[c].contentWindow.document.body,"click",function(){lastEventTime=_ptlCommon.getCurrentTime();});_ptlCommon.event(chldIframeElement[c].contentWindow.document.body,"keydown",function(){lastEventTime=_ptlCommon.getCurrentTime();});chldIframeElement[c].contentWindow.document.body.setAttribute("iframe_click","true");}}}}}}catch(e){}},1000);}
function appendUserActivityTag(){var iframe=_ptlCommon.appendHtml(bodyElement,"iframe","isUserActivity_iframe");var form=_ptlCommon.appendHtml(bodyElement,"form","isUserActivity_form");iframe.frameborder="0";iframe.width="0px";iframe.height="0px";iframe.style.display="none";}
function renderMaskHtml(){var activityLayear="";activityLayear+="<div id='ptlCommon_mask' style='z-index:999; position:absolute;top:0;left:0; width:100%;height:100%; background:#000; filter: alpha(opacity=70); -khtml-opacity: 0.7; -moz-opacity: 0.7; opacity: 0.7;display:none;'></div>";activityLayear+="<div id='ptlCommon_mask_content' style='z-index:1000;position:absolute;top:30%;left:50%;width:400px;height:260px;padding:0;margin:0 0 0 -200px;display:none;'>";activityLayear+=" <dl>";activityLayear+="  <dt style='height:31px;padding:16px 0 0 90px;font-size:14px;color:#555;font-weight:bold;background:url("+ptlSrc+"/img/bg_pop_logout_wrap_top.png) no-repeat;'>";activityLayear+=_ptlCommon.getMsg("headline","<span style='font-size:16px;color:#ff6666;' id='ptlCommon_logoutTime'>"+timeOutTime+"</span>");activityLayear+="  </dt>";activityLayear+="  <dd style='padding:26px 0 30px 0;text-align:center;font-size:12px;color:#555;line-height:18px;background:url("+ptlSrc+"/img/bg_pop_logout_wrap_cont.png) no-repeat;'>";activityLayear+="   <strong style='font-size:20px;color:#333;'>"+_ptlCommon.getMsg("title")+"</strong>";activityLayear+="   <p style='padding:20px 0 35px 0;'>";activityLayear+=_ptlCommon.getMsg("body","<strong style='color:#ff6666;' id='activityTime'></strong>");activityLayear+="   </p>";activityLayear+="   <a href='#none' style='display:inline-block;width:116px;height:31px;line-height:31px;font-size:12px;text-decoration:none;text-align:center;color:#fff !important;font-weight:bold;background:url("+ptlSrc+"/img/btn_logout_ok2.gif) no-repeat;' id='ptlCommon_activityLogin'>"+_ptlCommon.getMsg("btnActivityLogin")+"</a>";activityLayear+="  </dd>";activityLayear+=" </dl>";activityLayear+="</div>";activityLayear+="<form id='ptlCommon_docActivityCheckFrm' name='ptlCommon_docActivityCheckFrm' method='post'><input type='hidden' id='ptlCommon_cntsSsoInterval' name='cntsSsoInterval' /><input type='hidden' id='ptlCommon_APP' name='_APP' /><input type='hidden' id='ptlCommon_ICON' name='_ICON' /></form>";activityLayear+="</div>";bodyElement.insertAdjacentHTML('beforeend',activityLayear);_ptlCommon.event(document.getElementById("ptlCommon_activityLogin"),"click",function(){document.getElementById("ptlCommon_mask").style.display="none";document.getElementById("ptlCommon_mask_content").style.display="none";lastEventTime="";_ptlCommon.setText("ptlCommon_logoutTime",timeOutTime);clearInterval(timer2);setDocInterval();try{if(!e.stopPropagation){e.cancelBubble=true;}else{e.stopPropagation();}}catch(t){}});}
this.setSessionTimeOutFn=function(o){sessionTimeOutFn=o;};this.setMaxInactiveInterval=function(v){if(!_ptlCommon.isNull(v)){cntsSsoInterval=v;setDocInterval();}};this.getMaxInactiveInterval=function(){return cntsSsoInterval;};this.setActivityCheckWin=function(Object){openWinObject.push(Object);openWinEventBind(Object,1);};this.touchMask=function(){if(document.getElementById("ptlCommon_mask_content").style.display=="block"){if(document.body.scrollHeight<document.documentElement.clientHeight){document.getElementById("ptlCommon_mask").style.height=document.documentElement.clientHeight+"px";}else{document.getElementById("ptlCommon_mask").style.height=document.body.scrollHeight+"px";}
var scrollLeft=document.body.scrollLeft||document.documentElement.scrollLeft;var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;var left=(scrollLeft+(document.documentElement.clientWidth)/2);var top=(scrollTop+(document.documentElement.clientHeight-260)/2);document.getElementById("ptlCommon_mask_content").style.top=top+"px";document.getElementById("ptlCommon_mask_content").style.left=left+"px";}};this.isMask=function(){if(document.getElementById("ptlCommon_mask_content").style.display=="block"){return true;}else{return false;}};this.getLastEventTime=function(){return lastEventTime;};this.getMyScript=function(){var scripts=document.getElementsByTagName('script');var myScript=scripts[scripts.length-1];var queryString=myScript.src.replace(/^[^\?]+\??/,'');var params=_ptlCommon.parseQuery(queryString);ptlSrc=params["portalSrc"];};this.main=function(){docEventBind();if(_ptlCommon.isNull(timer1)){setDocInterval();}
renderMaskHtml();lastEventTime=_ptlCommon.getCurrentTime();};},getText:function(id){var v;if("Firefox"!=_ptlCommon.getBrowserType()){v=document.getElementById(id).outerText;}else{v=document.getElementById(id).innerHTML;}
return v;},setText:function(id,v){if("Firefox"!=_ptlCommon.getBrowserType()){document.getElementById(id).innerText=v;}else{document.getElementById(id).innerHTML=v;}},appendHtml:function(target,tag,id){var o=document.createElement(tag);o.id=id;o.name=id;target.appendChild(o);return o;},getCurrentTime:function(){var now=new Date();var year=now.getFullYear();var month=now.getMonth();var date=now.getDate();var hour=now.getHours();var min=now.getMinutes();var sec=now.getSeconds();var m=(month+1>9)?month+1:'0'+(month+1);var d=(date>9)?date:'0'+date;var currentDate=year+""+(m)+""+(d)+"";currentDate+=String(hour>9?hour:'0'+hour)+String(min>9?min:'0'+min)+String(sec>9?sec:'0'+sec);return currentDate;},getDisplayTime:function(v){var nTotalMin=Math.floor(v/60);var nDay=0;var nHour=Math.floor(nTotalMin/60);var nMin=nTotalMin%60;var nSec=v%60;var cResult="";if(nHour>=24){nDay=Math.floor(nHour/24);nHour=nHour%24;}
cResult=(nDay>0?nDay+"일 ":"")
+(nHour>0?nHour+"시간 ":"")
+(nMin>0?nMin+"분 ":"")
+(nSec>0?nSec+"초 ":"");return cResult;},isNull:function(value){if(value==""||value==null||value=="null"||value==undefined||value=="undefined"){return true;}else{return false;}},parseQuery:function(query){var Params=new Object();if(!query)return Params;var Pairs=query.split(/[;&]/);for(var i=0;i<Pairs.length;i++){var KeyVal=Pairs[i].split('=');if(!KeyVal||KeyVal.length!=2)continue;var key=unescape(KeyVal[0]);var val=unescape(KeyVal[1]);val=val.replace(/\+/g,' ');Params[key]=val;}
return Params;},getBrowserType:function(){var browerName=navigator.appName;var browerAgent=navigator.userAgent;var browserVer=0;var browerType="";if(browerName.charAt(0)=="M"){browerType="MSIE";}else if(browerName.charAt(0)=="N"){if(browerAgent.indexOf("Chrome")!=-1){browerType="Chrome";}else if(browerAgent.indexOf("Firefox")!=-1){browerType="Firefox";}else if(browerAgent.indexOf("Mobile Safari")!=-1){browerType="Mobile Safari";}else if(browerAgent.indexOf("Safari")!=-1){browerType="Safari";}}
return browerType;}};var _UA=new _ptlCommon.UserActivity();_UA.getMyScript();_ptlCommon.event(window,"load",function(){_UA.main();});